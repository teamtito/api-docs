# Events

Events are planned social occasions that tickets will be sold for and people will attend.

An Event belongs to an `Account` and most other resources belong to an event.

An event URL is comprised of the combination of the `account_slug` and the `event_slug`.

For example `https://ti.to/ultimateconf/<%= Date.today.year %>` is composed:

* The base `ti.to` URL
* The Ultimate Conf `Account` slug `ultimateconf`
* The specific `Event` slug for the <%= Date.today.year %> edition.

The equivalent event can be looked up using a similar URL structure with the API base URL:

`<%= config[:api_endpoint] %>/ultimateconf/<%= Date.today.year %>`


## Attributes

<%= partial "includes/shared/attributes", locals: { attributes: data.events.attributes } %>

## Get all Events

<%= partial "includes/requests/get", locals: { url: "#{config[:api_endpoint]}/:account_slug/events" } %>
<%= partial "includes/events/index.json" %>

Retrieves all `Events` for the given `Account`.

* `account_slug` - The `slug` attribute of an `Account`.


## Get an Event

<%= partial "includes/requests/get", locals: { url: "#{config[:api_endpoint]}/:account_slug/:event_slug" } %>
<%= partial "includes/events/show.json" %>

Retrieve an individual `Event` for the given `Account`.

* `account_slug` - The `slug` attribute of an `Account`.
* `event_slug` - The `slug` attribute of an `Event`.

## Create an Event

<%= partial "includes/requests/post", locals: {
      url: "#{config[:api_endpoint]}/:account_slug/events",
      parameters: {
        event: {
          title: "Awesome Conf"
        }
      }
    } %>

Create a new `Event` belonging to the given `Account`.

* `account_slug` - The `slug` attribute of an `Account`.

### Parameters

<%= partial "includes/shared/parameters", locals: { parameters: data.events.attributes.reject { |attribute| attribute["read_only"] } } %>

## Update an Event

Update an `Event` belonging to the given `Account`.

* `account_slug` - The `slug` attribute of an `Account`.
* `event_slug` - The `slug` attribute of an `Event`.

FIXME: THIS IS MISSING FROM DASHBOARD

<%= partial "includes/requests/patch",
  locals: {
    url: "#{config[:api_endpoint]}/:account_slug/:event_slug",
    parameters: {
      event: {
        location: "Dublin, Ireland"
      }
    }
  }
%>


## Delete an Event

<%= partial "includes/requests/delete", locals: {
  url: "#{config[:api_endpoint]}/:account_slug/:event_slug"
} %>

Delete an `Event` belonging to the given `Account`.

* `account_slug` - The `slug` attribute of an `Account`.
* `event_slug` - The `slug` attribute of an `Event`.

FIXME: RETURNS HTML INSTEAD OF JSON SAYING YOU ARE BEING REDIRECTED

## Duplicate an Event

<%= partial "includes/requests/post", locals: { url: "#{config[:api_endpoint]}/:account_slug/:event_slug/duplication", parameters: {} } %>
<%= partial "includes/events/duplication.json" %>

Duplicate an existing `Event` belonging to the given `Account`.

* `account_slug` - The `slug` attribute of an `Account`.
* `event_slug` - The `slug` attribute of an `Event` to be duplicated.

As duplicating an `Event` happens asynchronously the Tito API provides a response
indicating the current `status` of the duplication:

* `processing` - The duplication is still being processed.
* `complete` - The duplication has successfully completed.

The latest status of the duplication can be then looked up.

## Duplicate an Event status

<%= partial "includes/requests/get", locals: { url: "#{config[:api_endpoint]}/:account_slug/:event_slug/duplication" } %>
<%= partial "includes/events/duplication_complete.json" %>

The latest status of the `Event` duplication.

* `account_slug` - The `slug` attribute of an `Account`.
* `event_slug` - The `slug` attribute of an `Event` to be duplicated.

As duplicating an `Event` happens asynchronously the API provides the ability to
lookup the latest status of the duplication. The status can be either:

* `processing` - The duplication is still being processed.
* `complete` - The duplication has successfully completed.

Once the duplication completes the Event `slug` and `title` will be assigned.
